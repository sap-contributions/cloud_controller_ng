#!/usr/bin/env ruby

require 'rubygems'
require 'bundler/setup'

Bundler.require

OpenTelemetry::SDK.configure do |c|
  c.use 'OpenTelemetry::Instrumentation::Sinatra'
end

require File.expand_path('../config/boot', __dir__)

ENV['RAILS_ENV'] ||= 'production'
ENV['SINATRA_ACTIVESUPPORT_WARNING'] ||= 'false'

require 'cloud_controller'
begin
  VCAP::CloudController::Runner.new(ARGV).run!
rescue => e
  puts e
  exit 1
end
